# 役職構成管理機能ガイド

Discord人狼Botの役職構成管理機能についての詳細説明です。

## 概要

役職構成管理機能は、Discord人狼Botのゲームで使用される役職の構成を管理するための機能です。サーバー管理者は、プリセットの役職構成を適用したり、カスタム役職構成を設定したりすることができます。

## コマンド一覧

役職構成管理には、以下のコマンドを使用します：

| コマンド | 説明 |
|----------|------|
| `!compose help` | 役職構成管理のヘルプを表示 |
| `!compose presets` | 利用可能なプリセット一覧を表示 |
| `!compose apply [プリセット名]` | 指定したプリセットを適用 |
| `!compose custom [人数] [役職1] [数1] [役職2] [数2] ...` | カスタム役職構成を設定 |
| `!compose force [人数] [役職1] [数1] [役職2] [数2] ...` | バランスチェックを無視してカスタム構成を設定 |
| `!compose recommend [人数]` | 指定した人数に適した役職構成を提案 |
| `!compose show [人数]` | 現在の役職構成を表示 |

## プリセット

以下のプリセットが利用可能です：

### 標準 (standard)
基本的な役職構成です。初心者から経験者まで幅広く対応。

| 人数 | 役職構成 |
|------|----------|
| 5人  | 村人: 2, 人狼: 1, 占い師: 1, 狩人: 1 |
| 6人  | 村人: 2, 人狼: 1, 占い師: 1, 狩人: 1, 狂人: 1 |
| 7人  | 村人: 3, 人狼: 1, 占い師: 1, 狩人: 1, 狂人: 1 |
| 8人  | 村人: 3, 人狼: 2, 占い師: 1, 狩人: 1, 狂人: 1 |
| 9人  | 村人: 3, 人狼: 2, 占い師: 1, 狩人: 1, 霊媒師: 1, 狂人: 1 |
| 10人 | 村人: 3, 人狼: 2, 占い師: 1, 狩人: 1, 霊媒師: 1, 狂人: 1, 妖狐: 1 |

### 初心者向け (beginner)
シンプルな役職構成です。初めての方におすすめ。

| 人数 | 役職構成 |
|------|----------|
| 5人  | 村人: 3, 人狼: 1, 占い師: 1 |
| 6人  | 村人: 4, 人狼: 1, 占い師: 1 |
| 7人  | 村人: 4, 人狼: 2, 占い師: 1 |
| 8人  | 村人: 5, 人狼: 2, 占い師: 1 |
| 9人  | 村人: 6, 人狼: 2, 占い師: 1 |
| 10人 | 村人: 6, 人狼: 3, 占い師: 1 |

### 上級者向け (advanced)
複雑な役職構成です。経験者におすすめ。

| 人数 | 役職構成 |
|------|----------|
| 7人  | 村人: 1, 人狼: 1, 占い師: 1, 狩人: 1, 霊媒師: 1, 狂人: 1, 妖狐: 1 |
| 8人  | 村人: 1, 人狼: 2, 占い師: 1, 狩人: 1, 霊媒師: 1, 狂人: 1, 妖狐: 1 |
| 9人  | 村人: 1, 人狼: 2, 占い師: 1, 狩人: 1, 霊媒師: 1, 狂人: 1, 妖狐: 1, 共有者: 1 |
| 10人 | 村人: 1, 人狼: 2, 占い師: 1, 狩人: 1, 霊媒師: 1, 狂人: 1, 妖狐: 1, 共有者: 2 |
| 11人 | 村人: 1, 人狼: 2, 占い師: 1, 狩人: 1, 霊媒師: 1, 狂人: 1, 妖狐: 1, 共有者: 2, 猫又: 1 |
| 12人 | 人狼: 3, 占い師: 1, 狩人: 1, 霊媒師: 1, 狂人: 1, 妖狐: 1, 共有者: 2, 猫又: 1, 背徳者: 1 |

### カオス (chaos)
バランスを考慮しない混沌とした役職構成です。

| 人数 | 役職構成 |
|------|----------|
| 8人  | 人狼: 2, 妖狐: 2, 狂人: 3, 占い師: 1 |
| 10人 | 人狼: 3, 妖狐: 2, 狂人: 2, 占い師: 1, 猫又: 2 |
| 12人 | 人狼: 4, 妖狐: 2, 狂人: 2, 占い師: 1, 猫又: 2, 背徳者: 1 |

## カスタム構成の設定

カスタム構成を設定する場合は、以下のフォーマットでコマンドを実行します：

```
!compose custom [人数] [役職1] [数1] [役職2] [数2] ...
```

例：
```
!compose custom 8 村人 3 人狼 2 占い師 1 狩人 1 狂人 1
```

## バランスチェック

カスタム構成設定時には、自動的にバランスがチェックされます。バランスチェックでは以下の条件が検証されます：

1. 占い師が最低1人必要
2. 人狼（または狼陣営の役職）が最低1人必要
3. 人狼の数が村人陣営より少ないこと
4. 第三陣営の数が全体の1/4以下であること
5. 狂人の数が人狼以下であること
6. 特定の役職の依存関係（例：妖狐がいる場合は占い師が必要、背徳者がいる場合は妖狐が必要）

バランスチェックを無視する場合は、`!compose force` コマンドを使用できます。

## 使用例

### プリセットの適用
```
!compose apply standard
```

### カスタム構成の設定
```
!compose custom 7 村人 3 人狼 2 占い師 1 狩人 1
```

### バランスチェックを無視したカスタム構成の設定
```
!compose force 7 人狼 3 占い師 1 狂人 3
```

### 特定人数の役職構成提案
```
!compose recommend 11
```

### 現在の役職構成の確認
```
!compose show
```

### 特定人数の役職構成確認
```
!compose show 8
```

## 注意事項

- 役職構成の設定はサーバー単位で保存されます
- 管理者権限を持つユーザーのみが設定を変更できます
- 役職の合計数はプレイヤー数と一致する必要があります
- プリセットに含まれない人数のゲームを行う場合は、カスタム構成を設定するか、近い人数のプリセットを推奨構成として使用してください
