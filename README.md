# Discord人狼Bot

Discord上で完全自動進行可能な人狼ゲームを提供するBotです。役職の割り当てからゲーム進行までをすべて自動化し、テキストベースの人狼ゲームを簡単に楽しむことができます。

## 主な機能

- 基本ゲームシステム（役職割り当て、夜・昼・投票フェーズの自動進行）
- 多彩な役職（村人、人狼、占い師、狂人、狩人、霊媒師、妖狐、共有者、背徳者、猫又、預言者、狂信者、てるてる坊主など）
- UIボタンとドロップダウンメニューを使用した直感的な操作
- カスタマイズ可能な役職構成と高度なバランス解析
- サーバーごとの詳細設定と役職の振る舞い調整
- 特殊ルール（恋人、初日犠牲者なし、連続ガード禁止、投票拒否、ランダム投票など）
- 詳細なゲームログと包括的な統計情報システム
- コミュニティ提案・フィードバックシステム
- 管理者向け高度な制御機能
- 役職パワーバランス自動調整システム
- 詳細な多言語対応ドキュメント

## 必要条件

- Python 3.8以上
- discord.py 2.0以上
- 必要なパッケージは `requirements.txt` に記載

## インストール方法

1. リポジトリのクローン:
```
git clone https://github.com/mokemoke0821/jinro-bot.git
cd jinro-bot
```

2. 依存パッケージのインストール:
```
pip install -r requirements.txt
```

3. `.env` ファイルの設定:
```
DISCORD_TOKEN=あなたのBotトークン
ADMIN_IDS=管理者のDiscord ID（カンマ区切りで複数指定可能）
```

4. Botの起動:
```
python main.py
```

## 使用方法

### 基本コマンド

- `!help` または `!werewolf_help` - コマンド一覧とヘルプを表示
- `!start` - ゲームの募集を開始
- `!join` - ゲームに参加
- `!begin` - ゲームを開始
- `!vote @ユーザー` - 指定したプレイヤーに投票
- `!action @ユーザー` - 夜の行動を実行（DMで使用）
- `!status` - 現在のゲーム状態を表示
- `!stats` - プレイヤーやサーバーの統計情報を表示
- `!settings` - サーバー設定の管理

詳細な使い方は `!docs guide` コマンドで確認できます。

## 役職一覧

- **村人陣営**: 村人、占い師、狩人、霊媒師、共有者、猫又、預言者、てるてる坊主
- **人狼陣営**: 人狼、狂人、狂信者
- **第三陣営**: 妖狐、背徳者

各役職の説明は `!roles` コマンドで確認できます。

## カスタマイズ

- `!config` - サーバー設定の詳細管理
- `!compose` - 役職構成の管理とバランス分析
- `!rules` - 特殊ルールと動作設定
- `!language` - 言語設定（日本語/英語対応）

### 役職構成管理

役職構成は `!compose` コマンドで管理できます。以下のサブコマンドが利用可能です：

- `!compose help` - 役職構成管理のヘルプを表示
- `!compose presets` - 利用可能なプリセット一覧を表示
- `!compose apply [プリセット名]` - 指定したプリセットを適用
- `!compose custom [人数] [役職1] [数1] [役職2] [数2] ...` - カスタム役職構成を設定
- `!compose force [人数] [役職1] [数1] [役職2] [数2] ...` - バランスチェックを無視してカスタム構成を設定
- `!compose recommend [人数]` - 指定した人数に適した役職構成を提案
- `!compose show [人数]` - 現在の役職構成を表示

#### 利用可能なプリセット

- **標準 (standard)** - 基本的な役職構成
- **初心者向け (beginner)** - シンプルな役職構成
- **上級者向け (advanced)** - 複雑な役職構成
- **カオス (chaos)** - バランスを考慮しない混沌とした役職構成

#### 役職のバランスチェック

カスタム構成設定時に自動的にバランスがチェックされます。バランスチェックをパスするには：

- 占い師と人狼が最低1人必要
- 人狼の数が村人陣営より少ないこと
- 第三陣営の数が全体の1/4以下であること
- 狂人の数が人狼以下であること
- 妖狐がいる場合は占い師が必要
- 背徳者がいる場合は妖狐が必要

必要に応じて `!compose force` でバランスチェックを無視できます。

## 管理者機能

- `!admin settings` - グローバル設定の管理
- `!admin analyze` - ゲームバランス詳細分析
- `!admin stats` - 全サーバー統計情報
- `!admin feedback` - ユーザーフィードバック管理

## ユーザーフィードバック

- `!feedback` - フィードバックや提案を送信
- `!suggest` - 新機能や役職の提案
- `!report` - バグ報告

## 開発者向け情報

開発者向けのAPIドキュメントは `!docs api` コマンドで確認できます。

### プロジェクト構造

```
jinro/
├── main.py - メインプログラム
├── cogs/ - コマンドとイベントハンドラー
│   ├── game_management.py - ゲーム管理機能
│   ├── night_actions.py - 夜のアクション処理
│   ├── day_actions.py - 昼のアクション処理
│   ├── voting.py - 投票システム
│   └── admin.py - 管理者コマンド
├── models/ - データモデル
│   ├── player.py - プレイヤークラス
│   ├── game.py - ゲームクラス
│   └── roles/ - 役職クラス
├── utils/ - ユーティリティ
│   ├── config.py - 設定管理
│   ├── embed_creator.py - 埋め込みメッセージ作成
│   ├── stats_manager.py - 統計管理
│   ├── balance_analyzer.py - バランス分析
│   └── validators.py - 入力検証
├── views/ - UIコンポーネント
│   ├── base_view.py - 基本ビュークラス
│   └── vote_view.py - 投票ビュー
├── data/ - データ保存
│   ├── config/ - サーバー設定
│   ├── stats/ - 統計データ
│   └── feedback/ - フィードバックデータ
└── docs/ - ドキュメント
```

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 貢献

バグ報告や機能リクエストは `!feedback` コマンドまたはGitHubのIssueで受け付けています。
プルリクエストも歓迎します！

## 連絡先

質問や提案があれば、Discord上またはGitHubのIssueでお気軽にお問い合わせください。
